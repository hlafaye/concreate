{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row g-4">

        <!-- LEFT : PROFILE -->
        <div class="col-lg-4">
            <div class="card shadow-sm border-0">

                <div class="card-body text-center">
                    <div class="mb-3">
                        <div class="rounded-circle bg-dark text-white d-inline-flex align-items-center justify-content-center"
                            style="width:72px;height:72px;font-size:24px;">
                            {{ user.name[0]|upper }}
                        </div>
                    </div>

                    <h5 class="mb-0">{{ user.name }}</h5>
                    <p class="text-muted mb-3">{{ user.email }}</p>

                    <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-dark btn-sm w-100">
                        Disconnect
                    </a>
                </div>
            </div>
        </div>

        <!-- RIGHT : ORDERS -->
        <div class="col-lg-8">
            <div class="card shadow-sm border-0">

                <div class="card-body">
                    <h4 class="mb-4">My Orders</h4>
        
                    {% if orders %}
                    <div class="list-group list-group-flush">
                        {% for order in orders %}
                        <a href="{{ url_for('auth.order_detail', order_id=order.id) }}"
                            class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
        
                            <div>
                                <strong>Order #{{ order.id }}</strong><br>
                                <small class="text-muted">
                                    {{ order.created_at.strftime('%d %b %Y') }}
                                </small>
                            </div>
        
                            <div class="text-end">
                                <span class="badge 
                                {% if order.status == 'paid' %} bg-success
                                {% elif order.status == 'pending' %} bg-warning text-dark
                                {% else %} bg-danger {% endif %}">
                                    {{ order.status }}
                                </span>
        
                                <div class="fw-bold mt-1">
                                    {{ "%.2f"|format(order.total) }} â‚¬
                                </div>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="text-muted text-center">No orders yet.</p>
                    {% endif %}
                </div>
            </div>
        </div>
        
        </div>
        </div>
    
  

{% endblock %}